<!DOCTYPE html>





<html class="theme-next pisces use-motion" lang="">
<head>
  <meta charset="UTF-8">
<meta name="generator" content="Hexo 3.9.0">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.3.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.3.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.3.0',
    sidebar: {"position":"right","display":"post","offset":12,"onmobile":false},
    back2top: {"enable":true,"sidebar":true,"b2t":true,"scrollpercent":true},
    save_scroll: false,
    copycode: {"enable":false,"show_result":false,"style":null},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    }
  };
</script>

<script>
    (function(){
        if(''){
            if (prompt('Password?') !== ''){
                alert('Wrong Answer!');
                history.back();
            }else{
                alert('Accepted!');
            }
        }
    })();
</script>

  <meta name="description" content="记录一下做过的好题吧~">
<meta property="og:type" content="article">
<meta property="og:title" content="好题记录">
<meta property="og:url" content="http://denny-qi.github.io/2019/08/22/好题记录/index.html">
<meta property="og:site_name" content="DennyQi&#39;s Site">
<meta property="og:description" content="记录一下做过的好题吧~">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-10-31T12:05:20.531Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="好题记录">
<meta name="twitter:description" content="记录一下做过的好题吧~">
  <link rel="canonical" href="http://denny-qi.github.io/2019/08/22/好题记录/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>好题记录 | DennyQi's Site</title>
  








  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  <div class="container sidebar-position-right">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">DennyQi's Site</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Practice Makes Perfect</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content page-post-detail">
            

  <div id="posts" class="posts-expand">
    

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://denny-qi.github.io/2019/08/22/好题记录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="DennyQi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://i.loli.net/2019/08/09/5vWaGcCgtxlU2wA.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DennyQi's Site">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">好题记录

            
          </h1>
        

        <div class="post-meta">
            
        <i class="fa fa-thumb-tack"></i>
        <span class="post-meta-divider">|</span>
    
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-08-22 12:40:42" itemprop="dateCreated datePublished" datetime="2019-08-22T12:40:42+08:00">2019-08-22</time>
            </span>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/好题记录/" itemprop="url" rel="index"><span itemprop="name">好题记录</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>记录一下做过的好题吧~</p>
<a id="more"></a>

<h1 id="2019-6"><a href="#2019-6" class="headerlink" title="2019.6"></a>2019.6</h1><h2 id="Codeforces-1166C-A-Tale-of-Two-Lands"><a href="#Codeforces-1166C-A-Tale-of-Two-Lands" class="headerlink" title="Codeforces 1166C A Tale of Two Lands"></a>Codeforces 1166C A Tale of Two Lands</h2><blockquote>
<p>给定一个数列，求其中满足 $min{|x+y|,|x-y|} \leq min{|x|,|y|}$且$max{|x|,|y|} \leq max{|x+y|,|x-y|}$的数对$(x,y)$个数。<br>$n \leq 2 \times 10^5$。</p>
</blockquote>
<p>如果去分类讨论$x,y$的符号会把问题变得非常复杂。观察条件包含的性质，发现这个条件是与$(x,y)$的<strong>符号无关</strong>的。也就是说如果将所有数都取其绝对值不会影响答案。</p>
<p>只需要考虑非负数的情况，那么排序之后对于每个$x$求出$y$的取值范围二分统计一下即可。复杂度$O(n \log n)$。</p>
<h2 id="Codeforces-437-C-The-Child-and-Toy"><a href="#Codeforces-437-C-The-Child-and-Toy" class="headerlink" title="Codeforces 437 C. The Child and Toy"></a>Codeforces 437 C. The Child and Toy</h2><blockquote>
<p>给出一个带点权的无向图，每次选择一个点删除，并删除这个点所连的边。删除一个点的代价是此时其所有相邻点的权值之和。问删完所有点的最小总代价。</p>
<p>$n \leq 1000, m \leq 2000$。</p>
</blockquote>
<p>删点的实质是在删边，每条边都会被删一次。正向反向考虑都很难，我们考虑每条边被删除时对答案产生的贡献。每条边被删除时它的两个端点中其中一个产生贡献。为了让答案尽量小，不妨假设每次都是点权较小的那个产生贡献。这就要求对于每条边都要先删除点权较大的点。这样做是否是可行的？如果我们能构造出一个删点顺序满足这样的条件那就是可行的。每条边都规定了一个顺序：点权大的排在点权小的之前。我们可以将每条边看做一条有向边，从点权大的连向点权小的。</p>
<p>这样形成的图一定无环（暂不考虑点权相等的情况），因此一定可以拓扑排序，那也就是说这样的方案一定存在。</p>
<p>而点权相等就可能有环，不过环内点先后是无所谓的。</p>
<p>因此枚举每条边即可求出答案，复杂度$O(m)$。为什么数据范围出那么小= =。</p>
<h2 id="Codeforces-1165-E-Two-Arrays-and-Sum-of-Functions"><a href="#Codeforces-1165-E-Two-Arrays-and-Sum-of-Functions" class="headerlink" title="Codeforces 1165 E. Two Arrays and Sum of Functions"></a>Codeforces 1165 E. Two Arrays and Sum of Functions</h2><blockquote>
<p>给出两个长度为$n$的序列$a$和$b$，定义$f(l,r)=\sum\limits_{i=l}^ra_ib_i$。现在可以给序列$b$中的元素指定任意顺序，问怎样指定$b$的顺序能让$\sum\limits_{1 \leq l \leq r \leq n}f(l,r)$最小。</p>
<p>$n \leq 2 \cdot 10^5$。</p>
</blockquote>
<p>我们考虑对于每一个位置$i$，$a_i \cdot b_i$会被统计$i(n-i+1)$次。</p>
<p>因此答案可以用这种形式来表示：</p>
<p>$$\sum\limits_{i=1}^na_ib_i \times i(n-i+1)$$</p>
<p>这个式子中除了$b_i$之外都是只与$i$有关的定值，因此考虑设一个$c_i=a_i \times i(n-i+1)$，答案转化为求$\sum\limits_{i=1}^nb_i  c_i$的最小值。</p>
<p>这个问题也就是给你两个序列$a,b$，问怎么给<strong>它们</strong>排列顺序能使$\sum\limits_{i=1}^{n}a_ib_i$最小。</p>
<p>关于两个序列两两相乘之和最小，有一个贪心的结论：<strong>将$a$从小到大排序，将$b$从大到小排序，$a_i$配对$b_i$，这样一定使答案最小</strong>。</p>
<p>证明：</p>
<p>对于$a_i,a_j,b_i,b_j$（排序后的）满足$1 \leq i &lt; j \leq n$。仅考虑这两项，现在的结果是$a_ib_i+a_jb_j$。如果交换$b_i,b_j$，那么答案是$a_ib_j+a_jb_i$。作差可得</p>
<p>$$a_ib_i+a_jb_j-a_ib_j+a_jb_i=a_i(b_i-b_j) + a_j(b_j - b_i) = (a_i-a_j)(b_i - b_j) \leq 0$$</p>
<p>因此不交换一定不会劣。</p>
<p>拓展：如果要使$\sum\limits_{i=1}^na_ib_i$最大，那么结论是将$a$和$b$都从小到大排序配对。证明类似。</p>
<h2 id="Codeforces-276-D-Little-Girl-and-Maximum-XOR"><a href="#Codeforces-276-D-Little-Girl-and-Maximum-XOR" class="headerlink" title="Codeforces 276 D. Little Girl and Maximum XOR"></a>Codeforces 276 D. Little Girl and Maximum XOR</h2><blockquote>
<p>给出$l,r$，求$max{ a \oplus b } (l \leq a \leq b \leq r)$</p>
<p>$1 \leq l,r \leq 10^{18}$</p>
</blockquote>
<p>先将$l,r$转二进制。位运算中要使某个数尽量大一定是从高位开始贪心。从最高位开始，如果相同也没有办法凑出$1$。直到第一个不同的位，我们能够凑出$1$。从这以后因为第一位已经不同的，于是$b$中每一位都可以变成$0$而不必担心小于$a$，$a$的每一位都可以上升而不必担心大于$b$。因此后面的每一位都可以凑出1了。</p>
<h2 id="Codeforces-577-B-Modulo-Sum"><a href="#Codeforces-577-B-Modulo-Sum" class="headerlink" title="Codeforces 577 B. Modulo Sum"></a>Codeforces 577 B. Modulo Sum</h2><blockquote>
<p>给出$n$个数，问能否选出一个子集使得其和能被$m$整除。</p>
<p>$n \leq 10^6, m \leq 10^3$</p>
</blockquote>
<p>对$n$个数做前缀和$s_i$，然后将$s_i$对$m$取模。如果存在$s_i=s_j$则区间$[i+1,j]$内数的和是$m$的倍数。根据鸽巢原理，只要$n&gt;m$就一定存在这样的区间。</p>
<p>于是限制条件就变成了$n \leq 10^3$。直接做背包即可。</p>
<h2 id="Codeforces-552-C-Vanya-and-Scales"><a href="#Codeforces-552-C-Vanya-and-Scales" class="headerlink" title="Codeforces 552 C. Vanya and Scales"></a>Codeforces 552 C. Vanya and Scales</h2><blockquote>
<p>给出两个数$w$和$m$（$1 \leq w,m \leq 10^9$），并给出$101$个砝码$w^0,w^1,\cdots,w^{100}$（每种重量只有一个）。将$m$放在左边，现在要在左右放若干砝码，问是否可能平衡。</p>
</blockquote>
<p>每个砝码可以放左边，放右边，或不放。也就是每个砝码的系数为${-1,0,1}$，问是否能使其总和为$m$。显然$w=2$一定满足，从$w=3$开始考虑，$\log_310^9 \approx 20$，因此折半搜索。</p>
<h2 id="Codeforces-578-B-“Or”-Game"><a href="#Codeforces-578-B-“Or”-Game" class="headerlink" title="Codeforces 578 B. “Or” Game"></a>Codeforces 578 B. “Or” Game</h2><blockquote>
<p>【或和，前缀后缀和】给出一个序列，可以进行$k$次操作，每次可以给序列中的一个数乘一个定值$x$。问操作后所有数的最大或和。</p>
</blockquote>
<p>位运算最大值又来了，从高到低贪心。想让一个高位变成1，尽量要把$x$乘在同一个数上。于是问题转化为给序列中的一个数乘上$x^k$，求最大或和。或的逆运算好像不存在，看似不太好维护。正确的做法是维护或的前缀和以及后缀和。这样就以每个数为界限将序列劈成了两半。</p>
<h1 id="2019-7"><a href="#2019-7" class="headerlink" title="2019.7"></a>2019.7</h1><h2 id="Codeforces-1063-B-Labyrinth"><a href="#Codeforces-1063-B-Labyrinth" class="headerlink" title="Codeforces 1063 B. Labyrinth"></a>Codeforces 1063 B. Labyrinth</h2><blockquote>
<p>【确定性】给出一个迷宫$(1 \leq n,m \leq 2000)$，求从起点到各个点，能够做到在左移动次数不超过$x$次，右移动次数不超过$y$次的情况下到达的点的个数。</p>
</blockquote>
<p>显然贪心地要求到达每个点时左右移动次数越少越好，但是两个关键字很难维护。而事实上，起点终点确定时，左移动次数确定时右移动次数一定确定。当终点在起点左侧时，最小化左移动次数即可；当终点在起点右侧时，依然最小化左移动次数即可。当然两者都最小化右移动次数也可以。这就告诉我们，我们只需要最小化其中一个就可以了。直接利用重复进队更新的bfs维护即可。</p>
<p>反思：确定性。对于平面距离的理解。</p>
<h2 id="Codeforces-1019-A-Elections"><a href="#Codeforces-1019-A-Elections" class="headerlink" title="Codeforces 1019 A. Elections"></a>Codeforces 1019 A. Elections</h2><blockquote>
<p>【逆向思维】有$n$个人给$m$个党投票（$1 \leq n,m \leq 3000$）。第$i$个人给$p_i$党投票，可以花$c_i$贿赂让他改变投票对象（任意改变）。问最少花多少钱能让1党获胜。</p>
</blockquote>
<p>正向思考很难。考虑确定1党最后的得票之后就可以确定达成这样的状态最少花多少钱，因此枚举1党得票，贪心计算最少花费。复杂度$O(n^2)$。具体的，设枚举到1党得票为$k$，则对于所有$a_i \geq k$，需要削掉，选择花费最少的削。之后如果还凑不到，就选最便宜的人凑就行了。</p>
<p>反思：正向难思考时选择逆向。</p>
<h2 id="Codeforces-777-D-Cloud-of-Hashtags"><a href="#Codeforces-777-D-Cloud-of-Hashtags" class="headerlink" title="Codeforces 777 D. Cloud of Hashtags"></a>Codeforces 777 D. Cloud of Hashtags</h2><blockquote>
<p>【从后往前做】给出$n$个字符串，在不改变字符串的顺序的情况下，允许任意删去每个字符串的一段后缀（可以删光），问总共最少删几个字符使所有字符串按字典序排列。</p>
</blockquote>
<p>考虑两个字符串的相对关系。要使得前一个字符串比后一个字符串字典序小，那么只需要从前往后扫到第一个不同的地方（或结尾）然后标记一下就好了。于是想到从前往后这样做。但这样会有问题，因为一旦后面的字典序变小，会影响前面的所有。正确的做法是<code>从后往前</code>这样做。</p>
<p>反思：怎样的顺序来做要弄清楚</p>
<h2 id="Codeforces-442-B-Andrey-and-Problem"><a href="#Codeforces-442-B-Andrey-and-Problem" class="headerlink" title="Codeforces 442 B. Andrey and Problem"></a>Codeforces 442 B. Andrey and Problem</h2><blockquote>
<p>【推式子，贪心】有$n$个人，第$i$个人有$a_i$的概率同意，$1-a_i$的概率不同意。问怎么选择一些人，使得只有一人同意的概率最大。</p>
</blockquote>
<p>假设我们已经选择了一个集合$S$，则概率为$\sum\limits_{i \in S}[\dfrac{a_i}{1-a_i}\prod\limits_{j \in S}(1-a_j)]$。令$B=\prod\limits_{i \in S}(1-a_i)$，$S=\sum\limits_{i \in S}\dfrac{a_i}{1-a_i}$。则概率为$SB$。</p>
<p>现在考虑加入一个$a_k$，那么考虑答案的变化量$\Delta=(S+\dfrac{a_k}{1-a_k}) \cdot B \cdot (1-a_k)-SB=B(1-S)a_k$。因此只要满足$S&lt;1$，那么选择$a_k$答案就会变大。</p>
<p>那么接下来考虑怎么选择。如果我们贪心地来考虑，那么显然选择最大的$a_k$会最优，这样我们对$a_k$排序从大到小选择直到$S \geq 1$为止，复杂度$O(n \log n)$。</p>
<p>为什么可以贪心，可以用反证法证明。</p>
<p>反思：数学问题推式子是个很好的选择。思想：计算每一次加入的$\Delta$以得到总的答案。</p>
<h2 id="Codeforces-1096-D-Easy-Problem"><a href="#Codeforces-1096-D-Easy-Problem" class="headerlink" title="Codeforces 1096 D. Easy Problem"></a>Codeforces 1096 D. Easy Problem</h2><blockquote>
<p>【DP状态定义、决策的思维】给出一个字符串，删除第$i$个字符的代价为$a_i$。问最少花多少代价使得原串内不存在子序列<code>hard</code>（不是子串，也就是可以不连续）</p>
</blockquote>
<p>对于每一个新加进来的字符，如果不是<code>h</code>、<code>a</code>、<code>r</code>、<code>d</code>中的一个则可以不用管。如果加入的是<code>d</code>，那么我们要么直接破坏这个<code>d</code>，要么破坏前面使得前面不存在<code>har</code>。想让前面不存在<code>har</code>，就要在<code>r</code>加入时做类似的事。因此我们选择DP。令$dp_{i,j}$表示前$i$个位置，破坏掉长度为$j$的前缀（可以不连续）的最小代价。于是根据刚才的两种决策，有$dp_{i,j}=\min{dp_{i-1,j-1},dp_{i-1,j}+a_i}$。那么答案就是$\min{dp_{n,j}}$。</p>
<p>反思：状态的定义与性质有关。这题还要再想想清楚</p>
<h2 id="Luogu-P2336-喵星球上的点名"><a href="#Luogu-P2336-喵星球上的点名" class="headerlink" title="Luogu P2336 喵星球上的点名"></a>Luogu P2336 喵星球上的点名</h2><blockquote>
<p>【工业题，后缀数组转化为区间问题，差分思想】有$n$个人，每人有两个字符串。给出$m$次询问，每次询问给出一个字符串，问这个字符串在多少个人的那两个字符串中的一个里出现过。询问结束后输出每个人被询问到的次数。</p>
</blockquote>
<p>首先将所有人和询问的字符串并在一起（中间要插字符）做SA。每一次询问就对应着后缀排序之后的一段区间，预处理出每一个后缀属于哪个人当做每个点的颜色，问题转化为区间颜色个数，与每个颜色被覆盖的次数。前者直接用莫队解决，后者考虑差分：每次覆盖到，就对答案加上剩余询问个数次贡献，每次离开，就对答案减去剩余询问个数次贡献。</p>
<p>反思：后缀数组总与区间问题联系在一起</p>
<h2 id="Codeforces-988-D-Points-and-Powers-of-Two"><a href="#Codeforces-988-D-Points-and-Powers-of-Two" class="headerlink" title="Codeforces 988 D. Points and Powers of Two"></a>Codeforces 988 D. Points and Powers of Two</h2><blockquote>
<p>【结论题】给出一个数列，选取其中最大的一个子集，满足其中任意两个元素满足$|a_i-a_j|=2^d,(d \geq 0)$</p>
</blockquote>
<p>子集大小不可能超过3！因为对于大小为三的子集，他们一定是等距的，不然两端的两个距离不会是二次幂。因此用个<code>map</code>记录，然后枚举指数暴力判断即可。复杂度$O(n \log^2n)$</p>
<p>反思：利用性质大致确定答案的数量级（可能值）</p>
<h2 id="Codeforces-375-B-Maximum-Submatrix-2"><a href="#Codeforces-375-B-Maximum-Submatrix-2" class="headerlink" title="Codeforces 375 B. Maximum Submatrix 2"></a>Codeforces 375 B. Maximum Submatrix 2</h2><blockquote>
<p>【由类似题获得思路；贪心】给出一个01矩阵（$1 \leq n,m \leq 5000$），可以任意交换行的顺序。求交换后可能的最大全1子矩形面积。</p>
</blockquote>
<p>我们知道静态的全1子矩形可以通过维护每个点向左延伸的最长1的个数，然后利用单调栈进行扩展求最值。那么我们不妨还是维护这个东西，然后对于每一列将这个值排个序求解。</p>
<p>反思：既然全1子矩形的问题碰到过，是通过维护延伸求解的。那么这种题应该不会差太远。思路要往这上面靠。</p>
<h2 id="Codeforces-2-B-The-least-round-way"><a href="#Codeforces-2-B-The-least-round-way" class="headerlink" title="Codeforces 2 B. The least round way"></a>Codeforces 2 B. The least round way</h2><blockquote>
<p>【双价值的处理】给出一个$n \cdot n$的矩阵，从左上角走到右下角（向右或向下），经过的数字相乘。怎样走使得得到的结果结尾的0尽量少。</p>
</blockquote>
<p>首先处理出每个数的2因子与5因子个数。接着有个重要结论：结尾的0的最小个数，为最小2的路径与最小5路径中的较小值。这样就把双价值的问题转化为单价值的问题了。</p>
<p>反思：双价值总是难以处理的。</p>
<h2 id="Codeforces-463-D-Gargari-and-Permutations"><a href="#Codeforces-463-D-Gargari-and-Permutations" class="headerlink" title="Codeforces 463 D. Gargari and Permutations"></a>Codeforces 463 D. Gargari and Permutations</h2><blockquote>
<p>【建图；问题特性】给出$k$个长度为$n$的<strong>排列</strong>（$1 \leq n \leq 1000,1 \leq k \leq 5$），求出LCS。</p>
</blockquote>
<p>枚举数对。预处理出每个数对在每个排列中是顺序的还是逆序的。如果对于所有排列某数对都是同一个序的，那么这个数对就是可以作为LCS的一部分的。找出所有这样的数对之后，得到一张$DAG$，求出最长链即可。</p>
<p>反思：DP的本质是DAG。因此关键是要抓住这张DAG在这里是什么。</p>
<h2 id="Codeforces-449-B-Jzzhu-and-Cities"><a href="#Codeforces-449-B-Jzzhu-and-Cities" class="headerlink" title="Codeforces 449 B. Jzzhu and Cities"></a>Codeforces 449 B. Jzzhu and Cities</h2><blockquote>
<p>【建图；最短路的性质】给出一张带权的无向图。再给出$k$条长度$w_i$的$(1,r_i)$的路径。问这$k$条路径最多能删掉几条，使得删掉之后所有点到1的最短路不变。</p>
</blockquote>
<p>将这$k$条路径加入图中，跑$Dijkstra$。同时每个点统计一个最短路入度。然后依次这$k$条路径，如果长度大于相应的最短路那肯定删去。如果恰好等于，那么看最短路入度，大于1则可以删去。然后将最短路的入度减去1.</p>
<p>反思：这其实是一个最短路树（最短路图）的问题。删边问最短路变化的问题一般都这样处理。</p>
<h2 id="Codeforces-471-D-MUH-and-Cube-Walls"><a href="#Codeforces-471-D-MUH-and-Cube-Walls" class="headerlink" title="Codeforces 471 D. MUH and Cube Walls"></a>Codeforces 471 D. MUH and Cube Walls</h2><blockquote>
<p>【字符串差分匹配】修改字符换匹配的定义：两个字符串的所有字符的差都相同。问匹配数。</p>
</blockquote>
<p>我们来分析一下这样匹配有什么特殊的性质，发现他们两两相邻的差是一样的。于是我们可以预处理出两个串的差分数组，然后直接去匹配差分数组就可以了。用KMP算法$O(n)$完成就可以了。</p>
<p>反思：匹配的本质就是寻找相同的东西。在这里两个数组相同的东西就是差分。</p>
<h2 id="Codeforces-1156-C-Match-Points"><a href="#Codeforces-1156-C-Match-Points" class="headerlink" title="Codeforces 1156 C. Match Points"></a>Codeforces 1156 C. Match Points</h2><blockquote>
<p> 给出一个长度为$n$的序列$a$和一个数$z$，数对$1 \leq i &lt; j \leq n$称为一个匹配当且仅当$|a_i-a_j| \geq z$。序列中一个数只能匹配一次。问最多能有多少个匹配。</p>
</blockquote>
<p>想到了一个贪心，排序后从前往后匹配差值第一个大于等于$z$的。然而被叉了，对于一个右端点在另一个左端点左边的情况，交换一下更优。</p>
<p>事实上可以二分答案，而贪心地验证是可以做到的。一定是去选择两端的依次匹配最优。</p>
<p>反思：直接贪心不可行，也许应用到二分验证中是可行的。</p>
<h2 id="Codeforces-274-B-Zero-Tree"><a href="#Codeforces-274-B-Zero-Tree" class="headerlink" title="Codeforces 274 B. Zero Tree"></a>Codeforces 274 B. Zero Tree</h2><blockquote>
<p>给出一棵树$(n \leq 10^5)$，有点权$v_i$。每一次操作可以选择一个包含根节点的连通块，使连通块内所有点的权值+1或-1。问最少进行多少次操作才能使整棵树的所有点权都变为0。</p>
</blockquote>
<p>根据题意分析，要对一个点进行操作的话必须对它的所有祖先进行相同的操作。而既然这样，想让一个点的点权归零进行操作，那之前就必须已经完成所有其后代的归零操作（因为如果后代没有归零，以后再去操作后代就必定会影响祖先使得决策不优）。而这样就将问题分解为子树上的子问题了。</p>
<p>我们记录$up_i$与$down_i$表示子树$i$归零所需要的+1与-1的最少操作次数。子树与子树之间可以通过根节点一并操作。这样根节点的权值在操作子树时至少会变化$\max{up_v}-\max{down_v}$，之后再让根节点归零再进行$|v_u+\max{up_v}-\max{down_v}|$次操作。</p>
<h1 id="2019-8"><a href="#2019-8" class="headerlink" title="2019.8"></a>2019.8</h1><p>##Codeforces 295 E. Yaroslav and Points</p>
<blockquote>
<p>给出一个序列$a_i$，（$|a_i| \leq 10^9$），单点修改。询问给出$l,r$，求$\sum\limits_{i=l}^{r}\sum\limits_{j=i}^{r}(x_j-x_i)$</p>
</blockquote>
<p>按照权值建线段树（动态开点或离散化），接下来询问的可以看做线段上两两之间的距离之和。分治求解可以得出两边内部两两的距离，于是只需要计算出所有跨越两边的点之间的距离之和就可以了。既然这样，就可以通过维护区间和以及区间点个数求解了。</p>
<p>##洛谷5154 数列游戏</p>
<blockquote>
<p>给出$n$个物品排成一排，第$i$个物品有两个值$a_i$与$b_i$。每次可以选择两个$a$值不互质的相邻物品移除，并获得他们$b$值之和的得分。问最多能得分多少。$(n \leq 800)$</p>
</blockquote>
<p>直接区间DP并不好处理。我们可以先做一次可行性DP，$f_{i,j}$表示$[i,j]$是否可行。$f$的转移有两种：一是枚举中断点；二是两端匹配。复杂度$O(n^3 \cdot log)$</p>
<p>处理出来后，再DP一次。$g_i$表示前$i$个的最大得分，分为$i$选与$i$不选，$i$不选直接继承，$i$选可以枚举左端点转移。复杂度$O(n^2)$</p>
<p>##HDU 6601 Keen On Everything But Triangle</p>
<blockquote>
<p>给出$n$根木棍$a_i$，每次询问一段区间$[l,r]$，问其中是否存在能拼成三角形的三根，并输出其周长的最大值。$n \leq 10^5,a_i \leq 10^9$</p>
</blockquote>
<p>考虑对于一些木棍，要使能拼成三角形且周长最长，一定是选择权值相近的三根。因此一个思路是将木棍排序，然后从大到小枚举连续的三根判断能不能拼成三角形。也可以不排序，每次用主席树维护区间第$k$大进行判断。</p>
<p>这样的复杂度是$O(nm \log n)$。但由于$a_i \leq 10^9$，要让一个木棍集合不可能形成三角形并使集合大小尽量大，这样一个集合就是<code>斐波那契数列</code>。而斐波那契数列到第$50$项就超过$10^9$，因此我们从大到小最多枚举$50$次一定会有解，并且一定是最优的。依然用主席树来维护。复杂度$O(50m \log n)$</p>
<h2 id="Codeforces-675-C-Money-Transfers"><a href="#Codeforces-675-C-Money-Transfers" class="headerlink" title="Codeforces 675 C. Money Transfers"></a>Codeforces 675 C. Money Transfers</h2><blockquote>
<p>给出一个长度为$n$的圆环，第$i$个位置有权值$a_i$，保证权值和一定为0。每个位置的权值可以向左或向右转移，问最少转移多少次使圆环上每个位置的权值都是0。</p>
</blockquote>
<p>显然一段长度为$l$的和为0的序列最多转移$l-1$次，因为相互之间你给我我给你可以只做一次。因此我们的任务是求出怎样划分使得和为0的序列尽量多。</p>
<p>利用前缀和的性质，和为0意味着前缀和的值相等。因此对于每一个前缀和的值用<code>map</code>求出与它相等的值有多少个，巧妙地解决了“环”的问题。</p>
<h2 id="Codeforces-468-B-Two-Sets"><a href="#Codeforces-468-B-Two-Sets" class="headerlink" title="Codeforces 468 B. Two Sets"></a>Codeforces 468 B. Two Sets</h2><blockquote>
<p>给出$n$个不同数，要将所有数分为两个集合$A,B$。再给出两个数字$a,b$，对于任意一个值为$x$的数，如果$x \in A$，那么$a-x \in A$；如果$x \in B$，那么$b-x \in B$。输出方案。</p>
</blockquote>
<p>否定后件：如果$a-x \notin A$，那么$x \notin A$。等价于如果$a-x \in B$，那么$x \in B$。也就是说只要$a-x$存在，那么$x$和$a-x$必须在同一个集合。同理如果$b-x$存在，那么$x$与$b-x$也必定在同一个集合。因此用并查集或者$2-sat$维护即可。</p>
<h2 id="Codeforces-558-E-A-Simple-Task"><a href="#Codeforces-558-E-A-Simple-Task" class="headerlink" title="Codeforces 558 E. A Simple Task"></a>Codeforces 558 E. A Simple Task</h2><blockquote>
<p>给出一个长度为$n$的字符串，给出$m$次询问，每次询问给出一个区间$[l,r]$，将这段区间升序或降序排序。最后输出结果。$n \leq 10^5, m \leq 5 \cdot 10^4$。</p>
</blockquote>
<p>考虑用线段树维护区间内每种字母的出现次数。在已知每种字符出现次数的情况下，区间排序等价于$|\sum|$次区间覆盖——用线段树维护。</p>
<h2 id="Codeforces-1200-E-Compress-Words"><a href="#Codeforces-1200-E-Compress-Words" class="headerlink" title="Codeforces 1200 E. Compress Words"></a>Codeforces 1200 E. Compress Words</h2><blockquote>
<p>给出$n$个字符串，每次将第一个和第二个字符串接龙（合并最长前后缀）并合并为一个字符串，输出最终结果。</p>
</blockquote>
<p>每一次合并字符串就需要更新，因此暴力$KMP$的复杂度退化为了$O(n^2)$。</p>
<p>考虑字符串哈希，每次在第二个串中从大到小枚举长度，并在第一个串中截取后缀判断哈希值是否相等。</p>
<p>$hash{s_{l..r}}=a_r-a_{l-1} \cdot base^{r-l+1}$。</p>
<h2 id="Codeforces-372-D-Choosing-Subtree-is-Fun"><a href="#Codeforces-372-D-Choosing-Subtree-is-Fun" class="headerlink" title="Codeforces 372 D. Choosing Subtree is Fun"></a>Codeforces 372 D. Choosing Subtree is Fun</h2><blockquote>
<p>给出一颗树。定义区间$[l,r]$的权值为包含所有标号$ \in [l,r]$的点的连通块最小点数。问权值$\leq k$的区间最大长度。$n \leq 10^5$</p>
</blockquote>
<p>用双指针代替二分答案。那么我们需要动态维护一个连续区间的连通块最小点数。可以将点数转化为边数，那么要求的等价于从根节点出发<strong>走遍</strong>所有点的最短路径。</p>
<p>这就是经典的异象石问题。有一个结论：这样的最短路径是所有点按照$dfs$序排序后两两之间的距离之和（最后一个连到第一个）。用$set$维护，支持加点和删点。</p>
<h2 id="「NOIP2017」逛公园"><a href="#「NOIP2017」逛公园" class="headerlink" title="***「NOIP2017」逛公园"></a>***「NOIP2017」逛公园</h2><blockquote>
<p>给出一张有向图，求从$1$到$n$路径长度不超过$d+k$的路径条数。其中$d$为$1$到$n$的最短路。$n \leq 10^5,k \leq 50$。</p>
</blockquote>
<p>难点在于状态的定义。$f[u][k]$表示$u$出发到$n$走的弯路长度为$k$的方案数。</p>
<p>有效路径上的$0$环找起来很讨厌，不会。</p>
<h1 id="2019-9"><a href="#2019-9" class="headerlink" title="2019.9"></a>2019.9</h1><h2 id="「NOIP2008」双栈排序"><a href="#「NOIP2008」双栈排序" class="headerlink" title="「NOIP2008」双栈排序"></a>「NOIP2008」双栈排序</h2><blockquote>
<p>给出一个排列，问其是否能双栈排序。定义进栈比出栈优先，进第一个栈比进第二个栈优先。求字典序最小的操作序列。$n \leq 10^3$。</p>
</blockquote>
<p>我的第一种思路是直接贪心模拟，然而贪心是错误的。当同时能进两个栈时，有时进第二个栈有解，进第一个栈却无解。</p>
<p>先来考虑一下单栈排序的情况。对于$i&lt;j$，如果$a_i&lt;a_j$，说明$a_i$比$a_j$先出栈。此时如果存在$j&lt;k$且$a_k&lt;a_i$，那么$k$必须必$i$先出栈了，这就意味着$k$进栈之前$i,j$都在栈内，也就不能保证$i$先出栈了，因此矛盾。而对于其他情况，$i,j$存在于同一栈内不会矛盾。</p>
<p>这是一个结论：一个序列不能单栈排序，当且仅当存在$i&lt;j&lt;k$使得$a_k&lt;a_i&lt;a_j$。通过维护最小值，求解的复杂度是$O(n^2)$的。</p>
<p>这就给了我们判断两个元素能否在同一栈内的条件。那么能否双栈排序即判定二分图。然后贪心模拟即可。</p>
<h2 id="Codeforces-319-B-Psychos-in-a-Line"><a href="#Codeforces-319-B-Psychos-in-a-Line" class="headerlink" title="Codeforces 319 B. Psychos in a Line"></a>Codeforces 319 B. Psychos in a Line</h2><blockquote>
<p>给出$n$个人，每个人有一个攻击力$a_i$。每一轮对于第$i$个人，如果$a_i &gt; a_{i+1}$，那么$i$就可以杀掉$i+1$。问最少几轮能杀到不能杀。$n \leq 10^5$。</p>
</blockquote>
<p>这个问题整体考虑比较复杂，可以考虑对于每一个个体来分析它被杀的条件。关键在于，只有相邻才可以杀。因此$i$要被杀，它之前所以比它小的必须死完。定义$f_i$为$i$第几轮死，那么$f_i = \max{f_j}+1$。用单调栈来维护是$O(n)$。</p>
<p>单调栈的优化在于，我可以不用重复统计之前一定比我小的数。在这道题中，我们将一整段比$i$小的信息都存到了$f_i$中，就避免了重复计算。</p>
<h2 id="Codeforces-1183-E-Subsequences-easy-version"><a href="#Codeforces-1183-E-Subsequences-easy-version" class="headerlink" title="Codeforces 1183 E. Subsequences (easy version)"></a>Codeforces 1183 E. Subsequences (easy version)</h2><blockquote>
<p>给出一个字符串，求最长的$k$个本质不同子序列的长度和。$n,k \leq 100$。</p>
</blockquote>
<p>对于一个字符串，复制一遍之前的本质不同子序列集合，并将新集合内每一个字符串末尾加上这个字符。排序去重，保留前$k$个即可。复杂度$O(n^2k \log k)$。</p>
<h2 id="Codeforces-280-B-Maximum-Xor-Secondary"><a href="#Codeforces-280-B-Maximum-Xor-Secondary" class="headerlink" title="Codeforces 280 B. Maximum Xor Secondary"></a>Codeforces 280 B. Maximum Xor Secondary</h2><blockquote>
<p>给出一个长度为$n$的序列（元素互不相同），问所有区间里“最大值异或次大值”的最大值。$n \leq 10^5$</p>
</blockquote>
<p>对于考虑所有XX的题目好像都不是直接考虑的。一般都是按每个元素来考虑。</p>
<p>考虑$a_i$作为次大值：如果最大值在它之前，那么一定是$a_i$之前第一个比$a_i$大的；如果最大值在它之后，那么一定是$a_i$之后第一个比$a_i$大的。</p>
<p>这一个过程用单调栈来维护即可。</p>
<h2 id="NOIp2012-开车旅行"><a href="#NOIp2012-开车旅行" class="headerlink" title="NOIp2012 开车旅行"></a>NOIp2012 开车旅行</h2><blockquote>
<p>预处理$n$个数每个数，比自己大的最近的和次近的元素。</p>
</blockquote>
<p>以位置为关键字，按照从大到小的顺序将元素插入平衡树（$set$）中，查询前驱、前驱的前驱、后继、后继的后继四者中离它最近的两个。</p>
<h1 id="2019-10"><a href="#2019-10" class="headerlink" title="2019.10"></a>2019.10</h1><h2 id="NOIp2016-愤怒的小鸟"><a href="#NOIp2016-愤怒的小鸟" class="headerlink" title="NOIp2016 愤怒的小鸟"></a>NOIp2016 愤怒的小鸟</h2><blockquote>
<p>第一象限内有$n$个点，问至少选择多少个形如$y=ax^2+bx 且 a&lt;0$的抛物线能够覆盖所有点。<br>$n \leq 18$</p>
</blockquote>
<p>在这道题中两点确定一条抛物线，使得状压的转移貌似是$n^2$的，复杂度$O(Tn^22^n)$有点悬。</p>
<p>事实上，我们发现$n^2$转移有些浪费。如果一个转移没有包含第一个点，那么之后迟早要回来转移第一个点。既然这样不如每一次转移包含第一个点的，这样就是$O(n)$转移的了。可以将这道题积累为一个优化转移的小$trick$。</p>
<h2 id="SDOI2010-外星千足虫"><a href="#SDOI2010-外星千足虫" class="headerlink" title="SDOI2010 外星千足虫"></a>SDOI2010 外星千足虫</h2><blockquote>
<p>给定$m$个异或方程，问最少使用前几个能够解出唯一解。<br>n,m \leq 2000</p>
</blockquote>
<p>这道题让我联想到了线性基，即先对前$n$个方程进行高斯消元，而后对于每一个方程跟线性基一样插入，直到没有自由元位置。但不知道为什么是不对的。</p>
<p>题解的做法是直接对$m$个方程做高斯消元。在高斯消元中，第$i$个方程要向下寻找第$i$项系数为1的方程。在这个寻找的过程中记录最大值就是我们的答案。这可以记为一个结论。</p>
<p>同时，异或方程组由于使用的都是bool数组，可以用biteset优化。</p>
<h2 id="SCOI2009-最长距离"><a href="#SCOI2009-最长距离" class="headerlink" title="SCOI2009 最长距离"></a>SCOI2009 最长距离</h2><blockquote>
<p>给一个01矩阵，同一全0连通块中两点的距离为其欧几里得距离。现可以移去$T$个1，问最远点对距离。<br>$n \leq 30$</p>
</blockquote>
<p>正难则反。在同一连通块中等价于存在一条没有1的通路。那么枚举点对，判断要使他们连通最少移去多少个1——这个可以用Floyd预处理出来。</p>
<p>注意点权的Floyd不算起点。</p>
<h2 id="洛谷4215-踩气球"><a href="#洛谷4215-踩气球" class="headerlink" title="洛谷4215 踩气球"></a>洛谷4215 踩气球</h2><blockquote>
<p>给定长度为$n$的序列，并给定$m$个区间。每一次操作时给一个点权值-1，每一次操作后询问有多少个给定区间的和为0。<br>$n,m \leq 10^5$</p>
</blockquote>
<p>显然复杂度不允许我们每一次操作后遍历所有区间，因此<strong>答案的统计得在修改的过程中完成</strong>。</p>
<p>考虑用线段树维护区间和。我们知道，一个区间可以拆解为线段树上若干节点。如果这若干个节点的值都为0，那么这个区间的和就为0。</p>
<p>在这道题中，线段树上一个节点可以作为若干个给定区间拆解后的节点。modify过程中如果碰到一个节点为0，那么就对对应的若干区间产生贡献。如果一个区间被贡献的次数等于拆解后的节点数，那么这个区间和就为0了。</p>
<h2 id="Codeforces-3-D-Least-Cost-Bracket-Sequence"><a href="#Codeforces-3-D-Least-Cost-Bracket-Sequence" class="headerlink" title="Codeforces 3 D. Least Cost Bracket Sequence"></a>Codeforces 3 D. Least Cost Bracket Sequence</h2><blockquote>
<p>给一个由’(‘,’?’,’)’三种字符组成的字符串。将第$i$个’?’替换成’(‘的代价为$a_i$，替换成’)’的代价为$b_i$。问替换成合法括号序列的最小代价为多少。<br>$n \leq 5 \cdot 10^4$</p>
</blockquote>
<p>如果从前往后替换所有’?’，那么任何时候右括号数量都不能大于左括号数量。而最后总共能填的左右括号数量是确定的。因此不妨一开始默认将所有的’?’都替换成’)’。到达一定程度之后肯定会出现右括号过量的情况，此时需要考虑将之前的某个’)’替换为’(‘。我们贪心地去替换最优的那个，因此用一个优先队列维护之前所有填了右括号的位置。</p>
<h2 id="Codeforces-1065-F-Up-and-Down-the-Tree"><a href="#Codeforces-1065-F-Up-and-Down-the-Tree" class="headerlink" title="Codeforces 1065 F. Up and Down the Tree"></a>Codeforces 1065 F. Up and Down the Tree</h2><blockquote>
<p>给出一棵树，从一个节点可以跳到子树的一个叶子上，叶子节点可以向上跳，但最多跳$k$条边。问从根节点出发最多能遍历多少个叶子节点。$n \leq 10^6$。</p>
</blockquote>
<p>一个叶子节点可以直接回到根节点，或者以别的叶子为跳板往上跳，即向上跳$k$格然后到子树内另一个深度更浅的一个叶子再往上跳。</p>
<p>我们先看从根节点出发能回来的有多少个叶子，这些叶子都跳掉。然后选择一个子树下去……</p>
<p>从根出发能回来的叶子数量等价于有多少叶子能跳到根。令$f_u$表示从节点$u$为根出发能回来的叶子数量，这样转移：</p>
<p>$$f_u=\sum\limits_{v \in son_u}f_v[low_v-dep_u \leq k]$$</p>
<p>只要子树最浅的叶子能够到达$u$，那这颗子树就不会断节，所有能到$v$的叶子都能够通过这个叶子到达$u$；反之就没有叶子能够到达$u$。</p>
<p>答案就是每次统计完$f$之后选择子树往下走，注意如果直接往下走会计算重复。因此在转移$f$的时候，一旦转移成功就将$f_v$清空，能够避免重复。问题转化为求根节点出发的最长链，再$dfs$一遍即可。</p>
<h2 id="CF1238F-The-Maximum-Subtree"><a href="#CF1238F-The-Maximum-Subtree" class="headerlink" title="CF1238F The Maximum Subtree"></a>CF1238F The Maximum Subtree</h2><blockquote>
<p>给出一颗树，要求选出一个$size$最大的连通子图，使得其满足这样的条件：将每个点看做数轴上的一条线段，树上两点之间有边当且仅当对应的线段有交。<br>$n \leq 3 \cdot 10^5$。</p>
</blockquote>
<p>分析这个条件，不可能存在三条线段相交于同一点，否则就会形成三元环。因此我们得出结论，答案的树的形态就是一条长的链，链上分出长度为1的边。（即一个毛毛虫）。</p>
<p>经过化简，答案本质上就是求点权为“度数-1”的最长链。树形$DP$即可。</p>
<h2 id="洛谷P2371-国家集训队-墨墨的等式"><a href="#洛谷P2371-国家集训队-墨墨的等式" class="headerlink" title="洛谷P2371 [国家集训队]墨墨的等式"></a>洛谷P2371 [国家集训队]墨墨的等式</h2><blockquote>
<p>给出$a_1..a_n$，求$a$基于正整数的线性变换在区间$[L,R]$内能取到的值得个数。即$[L,R]$内有多少$B$满足$a_1x_1+a_2x_2+ \cdots +a_nx_n=B,x \geq 0$。<br>$n \leq 12,a_i \leq 5 \ast 10^5$。</p>
</blockquote>
<p>我们的问题是区间内有多少数能被凑出。我们可以分别求出区间$[1,R]$和$[1,L-1]$的答案。下面以$R$为例。</p>
<p>由于加法交换律，我们选定一个$a_i$让它最后加。我们记这个$a_i$为$m$。这样的话，一个数$t$能被凑出等价于不用$m$可以凑出$t-k \ast m$，这等价于$t \ \text{mod} \ m$能被凑出。因此我们只需要考虑$m$的剩余系中有多少数能被凑出就行了。可以定义$f(i)$为能凑出的模$m$等于$i$的最小数，记为$u$。之所以要最小，因为如果最小答案都$&gt;R$那么就显然无解了。这个过程可以用最短路完成，对于$a_i$，我们可以这样转移$f((x+a_i)\text{mod} \ m) = \min{f(x)+a_i}$。那么接下来答案就是</p>
<p>$$\sum\limits_{i=0}^{m-1}(\left \lfloor \dfrac{R-f(i)}{m} \right \rfloor+1)$$</p>
<h2 id="洛谷P2939-USACO09FEB-Revamping-Trails"><a href="#洛谷P2939-USACO09FEB-Revamping-Trails" class="headerlink" title="洛谷P2939 [USACO09FEB]Revamping Trails"></a>洛谷P2939 [USACO09FEB]Revamping Trails</h2><blockquote>
<p>给出一张无向图，可以将至多$k$条边变成边权为$0$。求$1$到$n$的最短路。<br>$n \leq 10^4,k \leq 20$</p>
</blockquote>
<p>由于$k$很小，分层图跑$Dijkstra$即可。</p>
<p>这道题首先让我联想到了“逛公园”，因此先写了一个$O(nk)$的$DP$（记搜），但是挂成了$45$。但是我没有写成松弛的形式，不知道有没有这种实现方法。</p>
<h2 id="Codeforces-280-C-Game-on-Tree"><a href="#Codeforces-280-C-Game-on-Tree" class="headerlink" title="Codeforces 280 C. Game on Tree"></a>Codeforces 280 C. Game on Tree</h2><blockquote>
<p>给出一棵树，起初所有点都是白色的。每次随机选择一个白点，将它以及它的子树全部染黑。问期望染几次以后树上的点全部被染黑。<br>$n \leq 10^5$</p>
</blockquote>
<p>期望的线性性质在很多时候能帮助我们拆解问题。比如这道题中，期望的染色次数等于每个点期望的染色次数之和。</p>
<p>期望是所有情况总和的平均值。我们可以考虑随机一个染色序列，按照这个序列来染色。这样的话，一个点被染色一次当且仅当它的祖先没有一个被染过。</p>
<p>a<br>a<br>a<br>a<br>a<br>a<br>a<br>a<br>a</p>

    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
              <a href="/2019/08/19/2019模拟赛总结(9~11)/" rel="next" title="「2019模拟赛」总结(9~11)">
                <i class="fa fa-chevron-left"></i> 「2019模拟赛」总结(9~11)
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
              <a href="/2019/09/30/学习笔记/根号分治学习笔记/" rel="prev" title="「根号分治」学习笔记">
                「根号分治」学习笔记 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
    </footer>
  </div>
  
  
  
  </article>

  </div>


          </div>
          


        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">

          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="https://i.loli.net/2019/08/09/5vWaGcCgtxlU2wA.jpg"
      alt="DennyQi">
  <p class="site-author-name" itemprop="name">DennyQi</p>
  <div class="site-description motion-element" itemprop="description"></div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">21</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">tags</span>
        </a>
      </div>
    
  </nav>


  <div class="links-of-blogroll motion-element links-of-blogroll-block">
    <div class="links-of-blogroll-title">
      <i class="fa  fa-fw fa-link"></i>
      My Friends
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://dilute.xyz/" title="https://dilute.xyz/" rel="noopener" target="_blank">stO Dilute Orz</a>
        </li>
      
        <li class="links-of-blogroll-item">
          <a href="http://isonan.cn/" title="http://isonan.cn/" rel="noopener" target="_blank">stO Isonan Orz</a>
        </li>
      
        <li class="links-of-blogroll-item">
          <a href="https://www.cnblogs.com/linzhengmin" title="https://www.cnblogs.com/linzhengmin" rel="noopener" target="_blank">stO Lukelin Orz</a>
        </li>
      
        <li class="links-of-blogroll-item">
          <a href="https://dilemma-cmz.github.io/" title="https://dilemma-cmz.github.io/" rel="noopener" target="_blank">stO Dilemma Orz</a>
        </li>
      
        <li class="links-of-blogroll-item">
          <a href="https://memset0.cn/" title="https://memset0.cn/" rel="noopener" target="_blank">stO Memset0 Orz</a>
        </li>
      
    </ul>
  </div>

        </div>
      </div>
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#2019-6"><span class="nav-number">1.</span> <span class="nav-text">2019.6</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-1166C-A-Tale-of-Two-Lands"><span class="nav-number">1.1.</span> <span class="nav-text">Codeforces 1166C A Tale of Two Lands</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-437-C-The-Child-and-Toy"><span class="nav-number">1.2.</span> <span class="nav-text">Codeforces 437 C. The Child and Toy</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-1165-E-Two-Arrays-and-Sum-of-Functions"><span class="nav-number">1.3.</span> <span class="nav-text">Codeforces 1165 E. Two Arrays and Sum of Functions</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-276-D-Little-Girl-and-Maximum-XOR"><span class="nav-number">1.4.</span> <span class="nav-text">Codeforces 276 D. Little Girl and Maximum XOR</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-577-B-Modulo-Sum"><span class="nav-number">1.5.</span> <span class="nav-text">Codeforces 577 B. Modulo Sum</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-552-C-Vanya-and-Scales"><span class="nav-number">1.6.</span> <span class="nav-text">Codeforces 552 C. Vanya and Scales</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-578-B-“Or”-Game"><span class="nav-number">1.7.</span> <span class="nav-text">Codeforces 578 B. “Or” Game</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2019-7"><span class="nav-number">2.</span> <span class="nav-text">2019.7</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-1063-B-Labyrinth"><span class="nav-number">2.1.</span> <span class="nav-text">Codeforces 1063 B. Labyrinth</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-1019-A-Elections"><span class="nav-number">2.2.</span> <span class="nav-text">Codeforces 1019 A. Elections</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-777-D-Cloud-of-Hashtags"><span class="nav-number">2.3.</span> <span class="nav-text">Codeforces 777 D. Cloud of Hashtags</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-442-B-Andrey-and-Problem"><span class="nav-number">2.4.</span> <span class="nav-text">Codeforces 442 B. Andrey and Problem</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-1096-D-Easy-Problem"><span class="nav-number">2.5.</span> <span class="nav-text">Codeforces 1096 D. Easy Problem</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Luogu-P2336-喵星球上的点名"><span class="nav-number">2.6.</span> <span class="nav-text">Luogu P2336 喵星球上的点名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-988-D-Points-and-Powers-of-Two"><span class="nav-number">2.7.</span> <span class="nav-text">Codeforces 988 D. Points and Powers of Two</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-375-B-Maximum-Submatrix-2"><span class="nav-number">2.8.</span> <span class="nav-text">Codeforces 375 B. Maximum Submatrix 2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-2-B-The-least-round-way"><span class="nav-number">2.9.</span> <span class="nav-text">Codeforces 2 B. The least round way</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-463-D-Gargari-and-Permutations"><span class="nav-number">2.10.</span> <span class="nav-text">Codeforces 463 D. Gargari and Permutations</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-449-B-Jzzhu-and-Cities"><span class="nav-number">2.11.</span> <span class="nav-text">Codeforces 449 B. Jzzhu and Cities</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-471-D-MUH-and-Cube-Walls"><span class="nav-number">2.12.</span> <span class="nav-text">Codeforces 471 D. MUH and Cube Walls</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-1156-C-Match-Points"><span class="nav-number">2.13.</span> <span class="nav-text">Codeforces 1156 C. Match Points</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-274-B-Zero-Tree"><span class="nav-number">2.14.</span> <span class="nav-text">Codeforces 274 B. Zero Tree</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2019-8"><span class="nav-number">3.</span> <span class="nav-text">2019.8</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-675-C-Money-Transfers"><span class="nav-number">3.1.</span> <span class="nav-text">Codeforces 675 C. Money Transfers</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-468-B-Two-Sets"><span class="nav-number">3.2.</span> <span class="nav-text">Codeforces 468 B. Two Sets</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-558-E-A-Simple-Task"><span class="nav-number">3.3.</span> <span class="nav-text">Codeforces 558 E. A Simple Task</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-1200-E-Compress-Words"><span class="nav-number">3.4.</span> <span class="nav-text">Codeforces 1200 E. Compress Words</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-372-D-Choosing-Subtree-is-Fun"><span class="nav-number">3.5.</span> <span class="nav-text">Codeforces 372 D. Choosing Subtree is Fun</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#「NOIP2017」逛公园"><span class="nav-number">3.6.</span> <span class="nav-text">***「NOIP2017」逛公园</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2019-9"><span class="nav-number">4.</span> <span class="nav-text">2019.9</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#「NOIP2008」双栈排序"><span class="nav-number">4.1.</span> <span class="nav-text">「NOIP2008」双栈排序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-319-B-Psychos-in-a-Line"><span class="nav-number">4.2.</span> <span class="nav-text">Codeforces 319 B. Psychos in a Line</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-1183-E-Subsequences-easy-version"><span class="nav-number">4.3.</span> <span class="nav-text">Codeforces 1183 E. Subsequences (easy version)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-280-B-Maximum-Xor-Secondary"><span class="nav-number">4.4.</span> <span class="nav-text">Codeforces 280 B. Maximum Xor Secondary</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#NOIp2012-开车旅行"><span class="nav-number">4.5.</span> <span class="nav-text">NOIp2012 开车旅行</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2019-10"><span class="nav-number">5.</span> <span class="nav-text">2019.10</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#NOIp2016-愤怒的小鸟"><span class="nav-number">5.1.</span> <span class="nav-text">NOIp2016 愤怒的小鸟</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SDOI2010-外星千足虫"><span class="nav-number">5.2.</span> <span class="nav-text">SDOI2010 外星千足虫</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SCOI2009-最长距离"><span class="nav-number">5.3.</span> <span class="nav-text">SCOI2009 最长距离</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#洛谷4215-踩气球"><span class="nav-number">5.4.</span> <span class="nav-text">洛谷4215 踩气球</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-3-D-Least-Cost-Bracket-Sequence"><span class="nav-number">5.5.</span> <span class="nav-text">Codeforces 3 D. Least Cost Bracket Sequence</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-1065-F-Up-and-Down-the-Tree"><span class="nav-number">5.6.</span> <span class="nav-text">Codeforces 1065 F. Up and Down the Tree</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CF1238F-The-Maximum-Subtree"><span class="nav-number">5.7.</span> <span class="nav-text">CF1238F The Maximum Subtree</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#洛谷P2371-国家集训队-墨墨的等式"><span class="nav-number">5.8.</span> <span class="nav-text">洛谷P2371 [国家集训队]墨墨的等式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#洛谷P2939-USACO09FEB-Revamping-Trails"><span class="nav-number">5.9.</span> <span class="nav-text">洛谷P2939 [USACO09FEB]Revamping Trails</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Codeforces-280-C-Game-on-Tree"><span class="nav-number">5.10.</span> <span class="nav-text">Codeforces 280 C. Game on Tree</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">DennyQi</span>
</div>

        








        
      </div>
    </footer>

    

  </div>

  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

<script src="/js/utils.js?v=7.3.0"></script>
  <script src="/js/motion.js?v=7.3.0"></script>


  <script src="/js/affix.js?v=7.3.0"></script>
  <script src="/js/schemes/pisces.js?v=7.3.0"></script>


<script src="/js/next-boot.js?v=7.3.0"></script>






  




























  

  
    
      <script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script>
<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', function() {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script>

    
  

  

  


  
  <script src="/js/scrollspy.js?v=7.3.0"></script>
<script src="/js/post-details.js?v=7.3.0"></script>


</body>
</html>
